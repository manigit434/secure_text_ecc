<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />

  <!-- REQUIRED -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>{% block title %}SecureText ECC{% endblock %}</title>

  <!-- Bootstrap Icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    rel="stylesheet"
  />

  <!-- Bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Google Font -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap"
    rel="stylesheet"
  />

  <!-- AOS -->
  <link
    href="https://unpkg.com/aos@2.3.1/dist/aos.css"
    rel="stylesheet"
  />

  <style>
    /* =====================
       THEME VARIABLES
    ===================== */
    :root {
      --bg: #020617;
      --card: rgba(255,255,255,0.08);
      --text: #e5e7eb;
      --muted: #94a3b8;
      --accent: #3b82f6;
    }

    [data-theme="light"] {
      --bg: #f8fafc;
      --card: rgba(255,255,255,0.95);
      --text: #020617;
      --muted: #475569;
      --accent: #2563eb;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: "Inter", sans-serif;
      min-height: 100vh;
      transition: background .4s ease, color .4s ease;
    }

    /* =====================
       GLOBAL LAYOUT
    ===================== */
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 4rem 1rem;
    }

    /* =====================
       NAVBAR
    ===================== */
    .navbar {
      border-bottom: 1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(10px);
    }

    .theme-toggle {
      cursor: pointer;
      font-size: 1.4rem;
      user-select: none;
    }

  /* =====================
   GLASS CARD
  ===================== */
.glass {
  background: var(--card);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 30px 80px rgba(0,0,0,.45); /* subtle depth */
}

    /* =====================
       HERO SECTION
    ===================== */
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 6rem 1rem;
      background:
        radial-gradient(circle at top, rgba(59,130,246,.25), transparent 60%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg) 70%, transparent 100%);
    }

    .hero h1 {
      color: var(--text);
      font-weight: 700;
    }

    .hero p {
      color: var(--muted);
      max-width: 700px;
      margin: 0 auto;
    }
/* =========================
   HERO SUBTITLE FIX
========================= */
.hero-subtitle {
  color: var(--muted);
  opacity: 1 !important;
  font-weight: 500;
  letter-spacing: .5px;
}

[data-theme="dark"] .hero-subtitle {
  color: #cbd5f5; /* visible soft blue */
}

[data-theme="light"] .hero-subtitle {
  color: #334155;
}

    /* =====================
       HERO BUTTONS
    ===================== */
    .hero .btn {
      min-width: 180px;
      font-weight: 600;
    }

    /* =====================
       FEATURE CARDS
    ===================== */
    .feature-card {
      background: var(--card);
      border: 1px solid rgba(59,130,246,.25);
      transition: all .35s ease;
      height: 100%;
    }

    .feature-card h5 {
      color: var(--text);
    }

    .feature-card p {
      color: var(--muted);
    }

    .feature-card:hover {
      transform: translateY(-6px) scale(1.02);
      box-shadow: 0 20px 60px rgba(59,130,246,.25);
      border-color: var(--accent);
    }

    /* =====================
       PROGRESS BARS
    ===================== */
    .progress {
      height: 6px;
      background: rgba(255,255,255,.12);
    }

    [data-theme="light"] .progress {
      background: rgba(0,0,0,.12);
    }

    /* =====================
       PIPELINE STEPS
    ===================== */
    .pipeline-step {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      background: var(--card);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      border: 1px solid rgba(255,255,255,.15);
      transition: transform .4s;
    }

    .pipeline-step:hover {
      transform: rotate(-6deg) scale(1.08);
    }

   /* =====================
       FOOTER
  ===================== */
footer {
  color: var(--muted);
  border-top: 1px solid rgba(255,255,255,.15);
  margin-top: 4rem;
}

[data-theme="light"] footer {
  border-top: 1px solid rgba(0,0,0,.15);
}
/*=========================
   VISIBILITY FIXES
  ========================= */

/* Force readable text on dark backgrounds */
.text-readable {
  color: var(--text) !important;
}

.text-muted-readable {
  color: var(--muted) !important;
  opacity: 1 !important;
}

/* Empty state */
.empty-state {
  color: var(--muted);
  text-align: center;
}

/* Dashboard headings */
.dashboard-title {
  color: var(--text);
  font-weight: 700;
}

/* Info alert override */
.alert-security {
  background: rgba(56, 189, 248, 0.15);
  border: 1px solid rgba(56, 189, 248, 0.4);
  color: #e0f2fe;
}

[data-theme="light"] .alert-security {
  background: rgba(56, 189, 248, 0.2);
  color: #020617;
}
/* =========================
   REGISTER PAGE STYLES
========================= */
.register-card {
  max-width: 420px;
  width: 100%;
}

.security-icon {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: rgba(59,130,246,.15);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: auto;
  font-size: 1.8rem;
  color: var(--accent);
}

.alert-security {
  background: rgba(56,189,248,.15);
  color: var(--text);
  border: 1px solid rgba(56,189,248,.4);
}

input {
  background: transparent !important;
  color: var(--text) !important;
  border: 1px solid rgba(255,255,255,.25) !important;
  border-radius: 10px !important;
  padding: 10px 12px !important;
}

input:focus {
  border-color: var(--accent) !important;
  box-shadow: 0 0 0 2px rgba(59,130,246,.25) !important;
}

[data-theme="light"] input {
  border-color: rgba(0,0,0,.25) !important;
}
/* =========================
   WIDE REGISTER CARD
========================= */
.register-wide {
  max-width: 720px;
  width: 100%;
}

.security-panel {
  background: linear-gradient(
    180deg,
    rgba(59,130,246,.08),
    rgba(0,0,0,.15)
  );
}

.security-points li {
  margin-bottom: 12px;
  font-weight: 500;
  display: flex;
  gap: 10px;
  align-items: center;
}

.text-muted-readable {
  color: var(--muted);
}

/* Better inputs */
input {
  background: transparent !important;
  color: var(--text) !important;
  border: 1px solid rgba(255,255,255,.25) !important;
  border-radius: 10px !important;
  padding: 10px 12px !important;
}

input:focus {
  border-color: var(--accent) !important;
  box-shadow: 0 0 0 2px rgba(59,130,246,.25) !important;
}

[data-theme="light"] .security-panel {
  background: linear-gradient(
    180deg,
    rgba(37,99,235,.08),
    rgba(255,255,255,.6)
  );
}
/* =========================
   FORM ERROR STYLES
========================= */
.form-error {
  margin-top: 6px;
  font-size: 0.85rem;
  color: #ff6b6b;
}

.form-error ul {
  padding-left: 18px;
  margin: 0;
}

.form-error li {
  list-style: disc;
}

/* Highlight invalid input */
input.is-invalid {
  border-color: #ff6b6b !important;
  box-shadow: 0 0 0 2px rgba(255,107,107,.25);
}
/* =========================
   INPUT VISIBILITY FIX
========================= */
input.form-control {
  background: rgba(255,255,255,0.06);
  color: var(--text) !important;
  border: 1px solid rgba(255,255,255,0.2);
}

input.form-control::placeholder {
  color: var(--muted);
  opacity: 0.7;
}

input.form-control:focus {
  background: rgba(255,255,255,0.08);
  color: var(--text);
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(59,130,246,.25);
}
  /* =========================
       MICRO-ANIMATED FEEDBACK
    ========================= */
    .form-control:focus {
      box-shadow: 0 0 0 2px rgba(59,130,246,.4);
      transition: box-shadow .2s ease;
    }

    .alert {
      animation: slideDown .4s ease;
    }

    @keyframes slideDown {
      from { opacity:0; transform:translateY(-10px); }
      to { opacity:1; transform:translateY(0); }
    }

      /* =========================
       WATERMARK
    ========================= */
    #watermark {
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-30deg);
      font-size: 4rem;
      color: rgba(255, 0, 0, 0.12);
      pointer-events: none;
      user-select: none;
      z-index: 9999;
      white-space: nowrap;
    }
  </style>
</head>


<body data-theme="dark">

<!-- =========================
     NAVBAR
========================= -->
<nav class="navbar px-4 py-3">
  <span class="fw-bold fs-5">üîê SecureText ECC</span>

  <div class="ms-auto d-flex align-items-center gap-3">
    <span class="theme-toggle" onclick="toggleTheme()">üåì</span>

    {% if user.is_authenticated %}
     <form method="post" action="{% url 'core:logout' %}" class="d-inline">
  {% csrf_token %}
  <button type="submit" class="btn btn-sm btn-outline-secondary">
    <i class="bi bi-box-arrow-right"></i> Logout
  </button>
</form>

    {% endif %}
  </div>
</nav>

<!-- =========================
     MAIN CONTENT
========================= -->
<main>
  {% block content %}{% endblock %}
</main>

<!-- =========================
     FOOTER
========================= -->
<footer class="text-center py-4">
  <div class="fw-semibold">
    Built with Django ¬∑ ECC ¬∑ AES-GCM ¬∑ Zero-Trust Architecture
  </div>

  <div class="small opacity-75 mt-1">
    ¬© {% now "Y" %} Manikanta ‚Ä¢ SecureText ECC
  </div>
</footer>

<!-- =========================
     SCRIPTS
========================= -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
  AOS.init({
    once: true,
    duration: 900,
    easing: "ease-out-cubic"
  });

  function toggleTheme() {
    const body = document.body;
    const current = body.getAttribute("data-theme");
    const next = current === "dark" ? "light" : "dark";
    body.setAttribute("data-theme", next);
    localStorage.setItem("theme", next);
  }

  (function () {
    const saved = localStorage.getItem("theme");
    if (saved) document.body.setAttribute("data-theme", saved);
  })();
</script>
<script>
  document.querySelectorAll(".form-error").forEach(err => {
    const input = err.previousElementSibling;
    if (input) input.classList.add("is-invalid");
  });
</script>
<script>
function togglePassword(id, iconId) {
  const input = document.getElementById(id);
  const icon = document.getElementById(iconId);

  if (input.type === "password") {
    input.type = "text";
    icon.classList.replace("bi-eye", "bi-eye-slash");
  } else {
    input.type = "password";
    icon.classList.replace("bi-eye-slash", "bi-eye");
  }
}
</script>

<!-- =========================
     USERNAME AVAILABILITY CHECK
========================= -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const usernameInput = document.getElementById("username");
  if (usernameInput) {
    usernameInput.addEventListener("blur", function () {
      fetch(`/check-username/?username=${this.value}`)
        .then(res => res.json())
        .then(data => {
          const msg = document.getElementById("userCheck");
          if (data.available) {
            msg.innerText = "Username available";
            msg.className = "text-success";
          } else {
            msg.innerText = "Username already taken";
            msg.className = "text-danger";
          }
        });
    });
  }
});
</script>

<!-- =========================
     PASSWORD STRENGTH METER
========================= -->
<script>
function checkStrength(password) {
  let score = 0;
  if (password.length >= 10) score++;
  if (/[A-Z]/.test(password)) score++;
  if (/[0-9]/.test(password)) score++;
  if (/[^A-Za-z0-9]/.test(password)) score++;

  const bar = document.getElementById("pwdStrength");
  const text = document.getElementById("pwdText");

  const levels = [
    ["bg-danger", "Very Weak"],
    ["bg-warning", "Weak"],
    ["bg-info", "Medium"],
    ["bg-success", "Strong"],
    ["bg-success", "Very Strong"]
  ];

  bar.className = "progress-bar " + levels[score][0];
  bar.style.width = (score * 25) + "%";
  text.innerText = levels[score][1];
}

document.addEventListener("DOMContentLoaded", () => {
  const pwd = document.getElementById("reg_password");
  if (pwd) {
    pwd.addEventListener("input", e => checkStrength(e.target.value));
  }
});
</script>

</body>
</html>